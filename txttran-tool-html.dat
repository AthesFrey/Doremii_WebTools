<!-- 引用 JS（注意版本号） -->
<script src="/wp-content/uploads/base-tool.js?v=20260126c"></script>
<script defer src="/wp-content/uploads/txttrans-tool.js?v=20260126c"></script>
<!-- 亮色模式解锁区修正：仅覆盖主题相关样式（最保守改动） -->
<style id="txttrans-gate-lightfix">
  /* 主题开关：暗色时 data-theme="dark"，亮色时为空或不存在 */
  :root:not([data-theme="dark"]) #txttrans-gate{
    background: rgba(255, 255, 255, 0.92) !important;
    border-color: rgba(17, 24, 39, 0.12) !important;
    color: #111827 !important;
    box-shadow: 0 10px 28px rgba(17, 24, 39, 0.08);
  }
  :root:not([data-theme="dark"]) #txttrans-gate > div:first-child{
    color: #111827 !important;
  }
  :root:not([data-theme="dark"]) #txttrans-msg{
    color: rgba(17, 24, 39, 0.65) !important;
  }
  :root:not([data-theme="dark"]) #txttrans-pass{
    background: rgba(17, 24, 39, 0.04) !important;
    color: #111827 !important;
    border-color: rgba(17, 24, 39, 0.14) !important;
  }
  /* 仅亮色模式下修正 placeholder（避免被暗色 placeholder 规则影响） */
  :root:not([data-theme="dark"]) #txttrans-pass::placeholder{
    color: rgba(107, 114, 128, 0.85) !important;
    opacity: 1 !important;
  }
</style>


<!-- 解锁区：暗黑模式更清晰 -->
<div id="txttrans-gate" style="
  margin:0 auto 12px;
  width:calc(100vw - 24px);
  max-width:520px;

  /* 关键：提高暗色背景下对比度 */
  background:rgba(10, 18, 14, 0.88);
  border:1px solid rgba(165, 214, 167, 0.55);
  border-radius:14px;
  padding:14px;
  box-sizing:border-box;

  color:#EAF6EC;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial;
">
  <div style="
    font-size:18px;
    font-weight:800;
    margin:0 0 10px;
    color:#EAF6EC;
  ">Txttrans Tool</div>

  <div style="display:flex;gap:10px;align-items:center;">
    <input id="txttrans-pass" type="password" autocomplete="off"
      placeholder="PBK code"
      style="
        flex:1;
        padding:12px 12px;
        border:1px solid rgba(165, 214, 167, 0.45);
        border-radius:12px;
        outline:none;
        font-size:16px;
        box-sizing:border-box;

        /* 输入框在暗背景下更清晰 */
        background:rgba(255,255,255,0.10);
        color:#F4FFF6;
      "
    />
    <button id="txttrans-unlock" type="button"
      style="
        padding:12px 16px;
        border:0;
        border-radius:12px;
        background:#4CAF50;
        color:#fff;
        font-size:16px;
        cursor:pointer;
        white-space:nowrap;
      "
    >check</button>
  </div>

  <div id="txttrans-msg" style="
    margin-top:8px;
    font-size:13px;
    opacity:1;
    color:#D9F4DC;
  "></div>
</div>

<!-- 工具区：默认隐藏；解锁后固定 520px -->
<div id="txttrans-app" style="
  display:none;
  margin:0 auto;
  width:520px;
  max-width:520px;
">
  <h2 style="
    font-size:22px;
    color:#2E7D32;
    text-align:center;
    margin:0 auto 10px;
  ">
    Txttrans Tool
  </h2>

  <doremii-text-recorder
    accent="#4CAF50"
    style="
      /* 琥珀绿色系 + 柔和背景 */
      --bg:#F6FFF8;
      --card-bg:#E8F5E9;
      --card-border:#A5D6A7;
      --text:#1B5E20;
      --button-bg:#4CAF50;
      --button-fg:#ffffff;
      --result-bg:#FFB74D;
      --result-fg:#3E2723;
      --hist-bg:#F1F8E9;

      display:block;
      width:100%;
      max-width:520px;
    ">
  </doremii-text-recorder>
</div>

<script>
(function () {
  const PASS = "thankgod";
  const gate = document.getElementById("txttrans-gate");
  const app  = document.getElementById("txttrans-app");
  const inp  = document.getElementById("txttrans-pass");
  const btn  = document.getElementById("txttrans-unlock");
  const msg  = document.getElementById("txttrans-msg");

  // 让 placeholder 在暗色背景下更清晰（不影响解锁后）
  const style = document.createElement("style");
  style.textContent = `
    #txttrans-pass::placeholder { color: rgba(244, 255, 246, 0.55); }
  `;
  document.head.appendChild(style);

  function unlock() {
    if ((inp.value || "").trim() === PASS) {
      gate.style.display = "none";
      app.style.display = "block";
    } else {
      msg.textContent = "public key format wrong";
      inp.focus();
      inp.select();
    }
  }

  btn.addEventListener("click", unlock);
  inp.addEventListener("keydown", (e) => {
    if (e.key === "Enter") unlock();
  });
})();
</script>