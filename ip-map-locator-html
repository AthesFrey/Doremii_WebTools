<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>来访 IP 定位小工具</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      margin: 0;
      padding: 16px;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "微软雅黑", sans-serif;
      background: #f5f5f5;
    }

    .ip-map-card {
      max-width: 420px;
      margin: 0 auto;
      padding: 12px 14px 16px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .ip-map-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 8px;
    }

    .info-line {
      font-size: 13px;
      margin: 3px 0;
      color: #333;
      word-break: break-all;
    }

    .info-label {
      color: #888;
      margin-right: 4px;
    }

    #map {
      width: 100%;
      height: 260px;
      margin-top: 10px;
      border-radius: 8px;
      overflow: hidden;
    }

    .tip {
      margin-top: 8px;
      font-size: 11px;
      color: #999;
      line-height: 1.4;
    }
  </style>

  <!-- 1. 高德安全密钥：必须在加载 JSAPI 之前设置 -->
  <script type="text/javascript">
    window._AMapSecurityConfig = {
      // TODO：换成你自己申请的 JSAPI 安全密钥 jscode
      securityJsCode: '3f6fc59c90d8c7f8afad06ade9245bcb'
    };
  </script>

  <!-- 2. 直接加载高德 JS API（不用 loader.js） -->
  <!-- TODO：换成你自己的 Web 端 JSAPI Key，并在高德控制台配置好当前域名白名单 -->
  <script src="https://webapi.amap.com/maps?v=2.0&key=6cd6a8409708cae39d0797b5a0c23c90"></script>

  <!-- 3. 你的外部 JS 文件（放在 /wp-content/uploads/ 下） -->
  <!-- ip-map-locator.js 里已经用 DOMContentLoaded 做延迟初始化，放在 head 里没问题 -->
  <script src="/wp-content/uploads/ip-map-locator.js?v=20251123C"></script>
</head>
<body>
  <div class="ip-map-card">
    <h1 class="ip-map-title">来访 IP 定位小工具</h1>

    <div class="info-line">
      <span class="info-label">IP：</span>
      <span id="ip-value">获取中…</span>
    </div>
    <div class="info-line">
      <span class="info-label">位置：</span>
      <span id="location-value">获取中…</span>
    </div>

    <div id="map"></div>

    <div class="tip">
      哈哈，发现你啦！IP已经定位到你的城市/区县级别。
    </div>
  </div>
</body>
</html>
