<!DOCTYPE html>
<html lang="en">
<head>
  <!-- 业务脚本：放到 head 最前面 -->
  <script defer src="/wp-content/uploads/concentration-exercise.js"></script>

  <meta charset="UTF-8">
  <title>Concentration Exercise</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 可选：如果此页面未加载到全站主题脚本，先用 localStorage 对齐一次，避免闪白 -->
  <script>
    (function(){
      try{
        if(!document.documentElement.dataset.theme){
          const t = localStorage.getItem('doremiiTheme');
          if(t === 'dark' || t === 'light') document.documentElement.dataset.theme = t;
        }
      }catch(e){}
    })();
  </script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Microsoft YaHei", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f2f2f8;
    }

    .ce2-wrapper {
      max-width: 960px;
      margin: 40px auto;
      padding: 24px;
      background: #f7f7fb;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .ce2-canvas-container {
      background: #ffffff;
      border-radius: 10px;
      padding: 16px;
      box-sizing: border-box;
    }

    #ce2-canvas {
      display: block;
      width: 100%;
      max-width: 900px;
      height: auto;
      border-radius: 8px;
      background: #ffffff;
    }

    .ce2-controls {
      margin-top: 20px;
      display: grid;
      grid-template-columns: 140px 1fr;
      row-gap: 12px;
      column-gap: 16px;
      align-items: center;
      font-size: 16px;
    }

    .ce2-controls label {
      white-space: nowrap;
    }

    .ce2-controls input[type="range"] {
      width: 100%;
    }

    .ce2-row-full {
      grid-column: 1 / 3;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .ce2-row-full select {
      padding: 4px 8px;
      font-size: 15px;
    }

    .ce2-inline {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 15px;
    }

    /* 两个按钮统一样式 */
    #ce2-reset,
    #ce2-readme {
      padding: 6px 16px;
      font-size: 15px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background: #ffffff;
      cursor: pointer;
    }

    #ce2-reset:hover,
    #ce2-readme:hover {
      background: #e9e9f5;
    }

    /* Readme 弹窗 */
    #ce2-readme-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      font-family: "Microsoft YaHei", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }

    #ce2-readme-overlay.active {
      display: flex;
    }

    .ce2-readme-dialog {
      background: #ffffff;
      max-width: 640px;
      width: 90%;
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    .ce2-readme-header {
      padding: 10px 16px;
      background: #f4f4fb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 16px;
      font-weight: 600;
    }

    #ce2-readme-close {
      border: none;
      background: transparent;
      font-size: 20px;
      cursor: pointer;
      line-height: 1;
    }

    .ce2-readme-body {
      padding: 16px 18px 18px;
      font-size: 14px;
      line-height: 1.6;
      color: #333;
      max-height: 60vh;
      overflow-y: auto;
    }

    .ce2-readme-body p {
      margin-top: 0;
      margin-bottom: 10px;
      text-indent: 2em;
    }

    /* =========================================================
       ✅ 暗色主题覆盖（不改结构、不改现有规则）
       触发条件：html 上存在 data-theme="dark"
       会优先读取你全站的 --d-bg/--d-text/--d-border（如果存在）
       ========================================================= */
    :root[data-theme="dark"]{
      color-scheme: dark;
    }

    :root[data-theme="dark"] body{
      background: var(--d-bg, #0b1220) !important;
      color: var(--d-text, #e5e7eb) !important;
    }

    :root[data-theme="dark"] .ce2-wrapper{
      background: rgba(255,255,255,.06) !important;
      box-shadow: 0 10px 28px rgba(0,0,0,.45) !important;
      border: 1px solid var(--d-border, rgba(255,255,255,.14)) !important;
    }

    :root[data-theme="dark"] .ce2-canvas-container{
      background: rgba(255,255,255,.05) !important;
      border: 1px solid var(--d-border, rgba(255,255,255,.14)) !important;
    }

    :root[data-theme="dark"] .ce2-controls,
    :root[data-theme="dark"] .ce2-controls label,
    :root[data-theme="dark"] .ce2-inline{
      color: var(--d-text, #e5e7eb) !important;
    }

    :root[data-theme="dark"] .ce2-row-full select{
      background: rgba(255,255,255,.06) !important;
      color: var(--d-text, #e5e7eb) !important;
      border: 1px solid var(--d-border, rgba(255,255,255,.14)) !important;
      border-radius: 4px;
    }

    :root[data-theme="dark"] #ce2-reset,
    :root[data-theme="dark"] #ce2-readme{
      background: rgba(255,255,255,.06) !important;
      color: var(--d-text, #e5e7eb) !important;
      border: 1px solid var(--d-border, rgba(255,255,255,.14)) !important;
    }

    :root[data-theme="dark"] #ce2-reset:hover,
    :root[data-theme="dark"] #ce2-readme:hover{
      background: rgba(255,255,255,.12) !important;
    }

    :root[data-theme="dark"] #ce2-readme-overlay{
      background: rgba(0,0,0,.55) !important;
    }

    :root[data-theme="dark"] .ce2-readme-dialog{
      background: rgba(255,255,255,.06) !important;
      border: 1px solid var(--d-border, rgba(255,255,255,.14)) !important;
      box-shadow: 0 14px 40px rgba(0,0,0,.55) !important;
      color: var(--d-text, #e5e7eb) !important;
    }

    :root[data-theme="dark"] .ce2-readme-header{
      background: rgba(255,255,255,.08) !important;
      color: var(--d-text, #e5e7eb) !important;
    }

    :root[data-theme="dark"] #ce2-readme-close{
      color: var(--d-text, #e5e7eb) !important;
    }

    :root[data-theme="dark"] .ce2-readme-body{
      color: var(--d-text, #e5e7eb) !important;
    }

    /* =========================================================
       ✅ 画布背景色跟随主题（圆圈大背景）
       JS 每次 draw() 会读取 --ce2-canvas-bg 来填充底色
       ========================================================= */
    :root{
      --ce2-canvas-bg: #ffffff; /* 亮色：白底 */
    }
    :root[data-theme="dark"]{
      --ce2-canvas-bg: #0f172a; /* 暗色：深底（可改成 #0b1220） */
    }

    #ce2-canvas{
      background: var(--ce2-canvas-bg);
      border: 1px solid rgba(0,0,0,.08);
    }
    :root[data-theme="dark"] #ce2-canvas{
      border-color: rgba(255,255,255,.14);
    }
  </style>
</head>
<body>

  <div class="ce2-wrapper">
    <div class="ce2-canvas-container">
      <canvas id="ce2-canvas" width="900" height="260"></canvas>
    </div>

    <div class="ce2-controls">
      <label for="ce2-diameter">Diameter</label>
      <input id="ce2-diameter" type="range" min="80" max="260" value="200">

      <label for="ce2-distance">Distance</label>
      <input id="ce2-distance" type="range" min="120" max="600" value="260">

      <label for="ce2-offset">Vertical offset</label>
      <input id="ce2-offset" type="range" min="-120" max="120" value="0">

      <div class="ce2-row-full">
        <label for="ce2-colorPair">Color</label>
        <select id="ce2-colorPair">
          <option value="0">Orange/blue</option>
          <option value="1">Red/cyan</option>
          <option value="2">Yellow/purple</option>
          <option value="3">Green/pink</option>
          <option value="4">Blue/red</option>
        </select>

        <label class="ce2-inline">
          <input type="checkbox" id="ce2-swap">
          Swap
        </label>

        <button id="ce2-reset" type="button">Reset values</button>
        <button id="ce2-readme" type="button">Readme</button>
      </div>
    </div>
  </div>

  <!-- Readme 弹出层 -->
  <div id="ce2-readme-overlay">
    <div class="ce2-readme-dialog">
      <div class="ce2-readme-header">
        <span>专注力练习使用说明</span>
        <button id="ce2-readme-close" type="button">&times;</button>
      </div>
      <div class="ce2-readme-body">
        <p>将练习图放在你前方大约 1 米处，伸出一只手，让一根手指位于两个圆圈之间并略低于圆圈位置。把注意力只集中在指尖上，不要看圆圈，你会先看到 4 个圆圈。然后慢慢调整视线，使中间两个圆圈重叠，在指尖正上方、两个圆圈中间的位置，会出现一个“白色十字”。通过微调手指与眼睛的距离，让这个十字变得清晰、稳定，并尽量保持 3–5 分钟；一开始十字会晃动不稳，能稳定坚持几分钟已经很好，专注 10–15 分钟往往需要几个月的训练。</p>
        <p>这项练习由汤姆·查尔科博士提出，目的是刺激并训练大脑左右半球之间的沟通，从而增强意识的“处理能力”，据说其灵感源自“外星文明”。当你看到那个并不存在于实际图像中的白色十字时，说明左半球（连接右眼）和右半球（连接左眼）正在同步协作，这个十字只存在于你的意识之中。练习被认为对身心非常有益，只需大约 5 分钟，就能促进身体的自我修复和再生，被视为比普通冥想更快速、更高效的一种专注与大脑整合训练。</p>
      </div>
    </div>
  </div>

</body>
</html>

